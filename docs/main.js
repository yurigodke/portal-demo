(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,r(i.key),i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(t,e,n){return(e=r(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,"string");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:String(n)}var o=n((function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,"circle",(function(t,e){for(var n=0;n<5;n++){var i=60+15*n,o=2*Math.random(),a=10*Math.random();r.ctx.beginPath(),r.ctx.arc(t,e,i-5,a,a+o*Math.PI);var u=r.ctx.createRadialGradient(t,e,i-5,t,e,i+5);u.addColorStop(0,"black"),u.addColorStop(.3,"green"),u.addColorStop(.7,"green"),u.addColorStop(1,"black"),r.ctx.strokeStyle=u,r.ctx.lineWidth=10,r.ctx.stroke()}})),i(this,"line",(function(t,e){r.ctx.beginPath(),r.ctx.moveTo(t.x,t.y),r.ctx.lineTo(e.x,e.y);var n=r.ctx.createLinearGradient(t.x,t.y,e.x,e.y);n.addColorStop(0,"transparent"),n.addColorStop(.3,"green"),n.addColorStop(.7,"green"),n.addColorStop(1,"transparent"),r.ctx.strokeStyle=n,r.ctx.lineWidth=2,r.ctx.stroke()})),i(this,"clean",(function(){r.ctx.clearRect(0,0,r.container.width,r.container.height)})),i(this,"updateSize",(function(t){var e=t.width,n=t.height;r.container.width=e,r.container.height=n})),this.container=document.getElementById(e),this.ctx=this.container.getContext("2d"),this.updateSize(n)}));function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){f(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,h(i.key),i)}}function l(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(t,e,n){return(e=h(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(t){var e=function(t,e){if("object"!=a(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,"string");if("object"!=a(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==a(e)?e:String(e)}var b=l((function t(e,n){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,"getData",(function(){var t=localStorage.getItem("dataPos"),e=JSON.parse(t),n=(new Date).getTime();return Object.keys(e).filter((function(t){return!e[t].timestamp||n-e[t].timestamp>1.1*i.updateInterval||void 0})).forEach((function(t){delete e[t]})),e})),f(this,"saveData",(function(t){if(i.id){var e=i.getData(),n=(new Date).getTime(),r=c(c({},e),{},f({},i.id,c(c({},t),{},{timestamp:n})));return localStorage.setItem("dataPos",JSON.stringify(r)),i.currentPositions=r,r}})),f(this,"getOthersPoints",(function(){if(!i.id)return{};var t=c({},i.currentPositions);return delete t[i.id],t})),this.id=n,this.updateInterval=e,this.currentPositions={}}));function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function y(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,g(i.key),i)}}function d(t,e,n){return e&&y(t.prototype,e),n&&y(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function p(t,e,n){return(e=g(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g(t){var e=function(t,e){if("object"!=w(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,"string");if("object"!=w(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==w(e)?e:String(e)}var v=d((function t(e,n){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,"fps",30),p(this,"updateContainers",(function(){i.canvas.updateSize(i.position.getUsableSize())})),p(this,"mainAnimate",(function(){var t=i.position.getCenterPosition();i.storage.saveData(t);var e=i.storage.getOthersPoints(),n=Object.values(e).map((function(t){return i.position.convertToLocal(t.globalCenter)}));i.canvas.clean(),i.canvas.circle(t.localCenter.x,t.localCenter.y),n.forEach((function(e){i.canvas.line(t.localCenter,e)}))})),this.intAnimate=1e3/this.fps,this.position=e,this.canvas=new o("mainDraw",e.getUsableSize()),this.storage=new b(this.intAnimate,n),setInterval(this.mainAnimate,this.intAnimate)}));function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function S(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,P(i.key),i)}}function P(t){var e=function(t,e){if("object"!=m(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,"string");if("object"!=m(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==m(e)?e:String(e)}var O=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,(n=[{key:"windowHeight",get:function(){return window.screen.height}},{key:"windowWidth",get:function(){return window.screen.width}},{key:"browserHeight",get:function(){return window.outerHeight}},{key:"browserWidth",get:function(){return window.outerWidth}},{key:"usableHeight",get:function(){return window.innerHeight}},{key:"usableWidth",get:function(){return window.innerWidth}},{key:"unusableHeight",get:function(){return this.browserHeight-this.usableHeight}},{key:"unusableWidth",get:function(){return this.browserWidth-this.usableWidth}},{key:"browserDistanceTop",get:function(){return this.unusableHeight}},{key:"browserDistanceRight",get:function(){return this.unusableWidth}},{key:"browserDistanceBottom",get:function(){return 0}},{key:"browserDistanceLeft",get:function(){return 0}},{key:"windowTop",get:function(){return window.screenY}},{key:"windowBottom",get:function(){return this.windowHeight-(this.windowTop+this.browserHeight)}},{key:"windowLeft",get:function(){return window.screenX}},{key:"windowRight",get:function(){return this.windowWidth-(this.windowLeft+this.browserWidth)}},{key:"getData",value:function(){return{windowTop:this.windowTop,windowLeft:this.windowLeft,windowBottom:this.windowBottom,windowRight:this.windowRight,windowHeight:this.windowHeight,unusableHeight:this.unusableHeight,usableHeight:this.usableHeight,windowWidth:this.windowWidth,unusableWidth:this.unusableWidth,usableWidth:this.usableWidth,browserDistanceTop:this.browserDistanceTop,browserDistanceRight:this.browserDistanceRight,browserDistanceBottom:this.browserDistanceBottom,browserDistanceLeft:this.browserDistanceLeft}}},{key:"getLocalCenterPosition",value:function(){return{y:this.usableHeight/2,x:this.usableWidth/2}}},{key:"getGlobalCenterPosition",value:function(t){return t||(t=this.getLocalCenterPosition()),{y:t.y+this.windowTop+this.unusableHeight,x:t.x+this.windowLeft}}},{key:"getCenterPosition",value:function(){var t=this.getLocalCenterPosition();return{localCenter:t,globalCenter:this.getGlobalCenterPosition(t)}}},{key:"getUsableSize",value:function(){return{height:this.usableHeight,width:this.usableWidth}}},{key:"getScreenPosition",value:function(){return{browserWidth:this.browserWidth,browserHeight:this.browserHeight,usableHeight:this.usableHeight,usableWidth:this.usableWidth,windowTop:this.windowTop,windowLeft:this.windowLeft}}},{key:"convertToLocal",value:function(t){var e=this.getLocalCenterPosition(),n=this.getGlobalCenterPosition(e),i=t.x-n.x,r=t.y-n.y;return{x:e.x+i,y:e.y+r}}}])&&S(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function j(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,x(i.key),i)}}function C(t,e,n){return e&&j(t.prototype,e),n&&j(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function W(t,e,n){return(e=x(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function x(t){var e=function(t,e){if("object"!=k(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,"string");if("object"!=k(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==k(e)?e:String(e)}var T=C((function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),W(this,"checkWatch",(function(){e.watchFunc&&e.watchFunc()})),W(this,"startWatch",(function(){e.watchFunc&&(e.watchInterval=setInterval(e.watchFunc,200))})),W(this,"stopWatch",(function(){e.watchInterval&&(clearInterval(e.watchInterval),e.watchInterval=null)})),W(this,"watchPosition",(function(t){e.watchFunc=t})),this.id=Math.random().toString(16).slice(2),this.watchFunc=null,this.watchInterval=null,this.storage=new b,window.addEventListener("mouseout",this.startWatch),window.addEventListener("mouseover",this.stopWatch),window.addEventListener("resize",this.checkWatch)})),D=new O,H=new T,L=new v(D,H.id),E=D.getScreenPosition();H.watchPosition((function(){var t=D.getScreenPosition();JSON.stringify(E)!=JSON.stringify(t)&&(L.updateContainers(),E=t)}))})();